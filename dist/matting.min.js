!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Matting=e()}(this,function(){"use strict";function t(t){if(!t.image)return void console.error("there must be a image contains mask and result.");var a=t.image,r=n({export_quality:.9,export_type:"base64",mask_zoom:.5,success:function(){},error:function(){}},t),i=void 0,u=void 0,c=void 0,m=void 0,s=void 0,d=void 0;e(a,function(t){console.dir(a),i=document.createElement("canvas"),u=i.getContext("2d"),i.width=t.naturalWidth,i.height=t.naturalHeight/2,u.drawImage(t,0,0),c=document.createElement("canvas"),m=c.getContext("2d"),c.width=t.naturalWidth*r.mask_zoom,c.height=t.naturalHeight*r.mask_zoom/2,m.drawImage(t,0,-t.naturalHeight*r.mask_zoom/2,t.naturalWidth*r.mask_zoom,t.naturalHeight*r.mask_zoom);var e=m.getImageData(0,0,c.width,c.height);o(e.data),m.putImageData(e,0,0),s=document.createElement("canvas"),d=s.getContext("2d"),s.width=t.naturalWidth,s.height=t.naturalHeight/2,d.drawImage(c,0,0,t.naturalWidth,t.naturalHeight/2),d.globalCompositeOperation="source-in",d.drawImage(i,0,0),"canvas"==r.export_type?r.success(s):r.success(s.toDataURL("image/png",r.quality))},function(t){r.error(t)})}function e(t,e,o){if("string"==typeof t){var n=new Image;n.crossOrigin="*",n.onload=function(){e(n)},n.onerror=function(){console.error("load image error!"),o(t)},n.src=t+"?"+(new Date).getTime()}else e(t)}function o(t){for(var e=0;e<t.length;e+=4){var o=t[e],n=t[e+1],a=t[e+2];o<=30&&n<=30&&a<=30&&(t[e+3]=0)}}function n(t,e){for(var o in e)e.hasOwnProperty(o)&&("object"==a(e[o])?("object"===a(t[o])&&null!==t[o]||(t[o]={}),n(t[o],e[o])):t[o]=e[o]);return t}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return t});
//# sourceMappingURL=matting.min.js.map
